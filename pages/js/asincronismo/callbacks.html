<!DOCTYPE html>
<html lang="es">

<head>
  <sergey-import src="metas/statics" />
  <sergey-import src="metas/titles">Asincronismo - Callbacks</sergey-import>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/menu.css">
  <link rel="stylesheet" href="/css/prism.css" />
</head>

<body>
  <sergey-import src="header" />

  <main class="container">

    <h1>Asincronismo en JavaScript - Callbacks</h1>

    <section id="event-loop">

      <h2>Callbacks</h2>

      <p>JavaScript posee diferentes mecanismos para trabajar la asincron铆a. El primero que se implemento son las
        callbacks. </p>

      <h3>驴Que son las funciones callbacks?</h3>

      <p>Una funci贸n callback es una funci贸n que se pasa a otra funci贸n como un argumento, que se ejecutar谩 despu茅s de
        que la primera lo haga para completar alg煤n tipo de rutina o acci贸n.</p>

      <h3>驴C贸mo trabaja una funci贸n callback?</h3>

      <p>El siguiente ejemplo muetsra el funcionamiento de una callback sincr贸nica, ya que se ejecuta
        inmediatamente.</p>

      <pre>
        <code class="language-javascript">
          function saludar(nombre) {
            alert('Hola ' + nombre);
          }
          function procesarEntradaUsuario(callback) {
            var nombre = prompt('Por favor ingresa tu nombre.');
            callback(nombre);
          }
          procesarEntradaUsuario(saludar);
        </code>
      </pre>

      <p>Sin embargo, las callbacks a menudo se utilizan para continuar con la ejecuci贸n del c贸digo despu茅s de que se
        haya completado una operaci贸n asincronica.</p>

      <p>En el siguiente ejemplo veremos un caso con callbacks as铆ncronas (como a煤n no vemos consumo de APIS, utilizamos
        setTimeout) y recursividad (la funci贸n se invoca a si misma).</p>

      <pre>
        <code class="language-javascript">
          function cuadradoCallback(value, callback) {
            setTimeout(() => {
              callback(value, value * value);
            }, 0 || Math.random() * 1000);
          }
          cuadradoCallback(0, (value, result) => {
            console.log("Inicia Callback");
            console.log(`Callback: ${value}, ${result}`);
            cuadradoCallback(1, (value, result) => {
              console.log(`Callback: ${value}, ${result}`);
              cuadradoCallback(2, (value, result) => {
                console.log(`Callback: ${value}, ${result}`);
                cuadradoCallback(3, (value, result) => {
                  console.log(`Callback: ${value}, ${result}`);
                  cuadradoCallback(4, (value, result) => {
                    console.log(`Callback: ${value}, ${result}`);
                    cuadradoCallback(5, (value, result) => {
                      console.log(`Callback: ${value}, ${result}`);
                      console.log("Fin Callback");
                      console.log("Callback Hell !!!!!");
                      console.log("http://callbackhell.com/");
                    });
                  });
                });
              });
            });
          }); 
        </code>  
      </pre>

      <p> Cuando anidamos callbacks, de alguna manera estamos controlando el asincronismo, ya que hasta que no termine
        la ejecuci贸n de la funci贸n anterior no comienza la siguiente (como si trabaj谩ramos en forma s铆ncrona). Un
        ejemplo es el caso de una consulta a una API. Hasta que no tengamos los datos (respuesta) no podremos ejecutar
        la siguiente funci贸n (almacenar los datos en una base de datos). Luego de almacenar los datos, podr铆amos mostrar
        los datos en pantalla. </p>

      <p>Este mecanismo puede generar lo que se denomina callback hell (c贸digo dificil de seguir). Podemos profundizar
        sobre callbacks hell en <a href="http://callbackhell.com/" target="_blank"
          rel="noopener noreferrer">http://callbackhell.com/</a>. Las promesas y funciones as铆ncronas (que veremos en
        las siguientes secciones) resulven este inconveniente. </p>

    </section>

    <hr>
  </main>

  <section class="pagination">
    <article class="pagination-item">
      <a href="/pages/js/asincronismo/event-loop.html">
        <i class="material-icons">arrow_back</i>Event Loop
      </a>
    </article>
    <article class="pagination-item">
      <a href="/pages/js/index.html#indice">Tabla de contenido JS
        <i class="material-icons">arrow_upward</i>
      </a>
    </article>
    <article class="pagination-item">
      <a href="/pages/js/asincronismo/promises.html">Promesas
        <i class="material-icons">arrow_forward</i>
      </a>
    </article>
  </section>
  <sergey-import src="footer" />
  <script src="/js/prism.js"></script>
</body>

</html>