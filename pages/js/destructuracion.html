<!DOCTYPE html>
<html lang="es">

<head>
  <sergey-import src="metas/statics" />
  <sergey-import src="metas/titles">Destructuración</sergey-import>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/menu.css">
  <link rel="stylesheet" href="/css/prism.css" />
</head>

<body>
  <sergey-import src="header" />

  <main class="container">

    <h1>Destructuración</h1>

    <section id="destructuracion">

      <p>La sintaxis de destructuración es una expresión de JavaScript que permite desempacar valores de arreglos o
        propiedades de objetos en distintas variables.</p>

      <p>Esta sintaxis permite asignar dinámicamente los valores de un objeto o arreglo en nuevas variables de forma
        ágil.</p>

      <pre>
        <code class="language-javascript">
          let numeros = [1, 2, 3];

          // Sin destructuración
          let uno = numeros[0];
          let dos = numeros[1];
          let tres = numeros[2];

          // Es equivalente a la siguiente sentencia con destructuración:
          let [uno, dos, tres] = numeros;
        </code>
      </pre>

      <p>Es una práctica común en frameworks JavaScript como react pasar propiedades de componentes padres a sus
        componentes hijos.</p>

      <pre>
        <code class="language-javascript">
          props = {
            nombre: 'Mauricio',
            apellido: 'Jourdan',
            edad: 47
          }

          let { nombre, apellido, edad } = props;
        </code>
      </pre>

      <blockquote>Para que la destructuración funcione correctamente las variables deben tener el mismo nombre que las
        propiedades del objeto. Por otro lado, utilizando el mismo nombre en la variable independiente no estamos
        obligados a respetar el orden de las variables en el objeto.</blockquote>

      <hr>

      <h2>Desestructuración de arreglos</h2>

      <pre>
        <code class="language-javascript">
          const foo = ['one', 'two', 'three'];

          const [red, yellow, green] = foo;
          console.log(red); // "one"
          console.log(yellow); // "two"
          console.log(green); // "three"
        </code>
      </pre>

      <h3>Valores predeterminados</h3>

      <p>A una variable se le puede asignar un valor predeterminado, en el caso de que el valor destructurado del
        arreglo sea undefined. </p>

      <pre>
        <code class="language-javascript">
          let a, b;

          [a=5, b=7] = [1];
          console.log(a); // 1
          console.log(b); // 7
        </code>  
      </pre>

      <h3>Intercambio de variables </h3>

      <p>Los valores de dos variables se pueden intercambiar en una expresión de desestructuración. Sin desestructurar
        la asignación, intercambiar dos valores requiere una variable temporal. </p>

      <pre>
        <code class="language-javascript">
          let a = 1;
          let b = 3;

          [a, b] = [b, a];
          console.log(a); // 3
          console.log(b); // 1

          const arr = [1,2,3];
          [arr[2], arr[1]] = [arr[1], arr[2]];
          console.log(arr); // [1,3,2]
        </code>  
      </pre>

      <h3>Analizar un arreglo devuelto por una función</h3>

      <p>Siempre ha sido posible devolver un arreglo desde una función. La desestructuración puede hacer que trabajar
        con un valor de retorno de arreglo sea más conciso. </p>

      <pre>
        <code class="language-javascript">
          function f() {
            return [1, 2];
          }
          
          let a, b;
          [a, b] = f();
          console.log(a); // 1
          console.log(b); // 2          
        </code>  
      </pre>

      <h3>Ignorar algunos valores devueltos </h3>

      <p>Puedes ignorar los valores de retorno que no te interesan: </p>

      <pre>
        <code class="language-javascript">
          function f() {
            return [1, 2, 3];
          }
          
          const [a, , b] = f();
          console.log(a); // 1
          console.log(b); // 3

          // También puedes ignorar todos los valores devueltos:

          [,,] = f();
        </code>  
      </pre>

      <h3>Asignar el resto de un arreglo a una variable</h3>

      <pre>
        <code class="language-javascript">
          const [a, ...b] = [1, 2, 3];
          console.log(a); // 1
          console.log(b); // [2, 3]
        </code>  
      </pre>

      <h3>Desempacar valores coincidentes con una expresión regular</h3>
      <pre>
        <code class="language-javascript">
          function parseProtocol( url ) {
            const parsedURL = /^(\w+)\:\/\/([^\/]+)\/(.*)$/.exec( url );
            if ( !parsedURL ) {
              return false;
            }
            return parsedURL;
          }
  
          const [url, protocol, fullhost, fullpath] = parseProtocol( 'https://developer.mozilla.org/es/Web/JavaScript' );
          console.log( "url:", url );            // url: https://developer.mozilla.org/es/Web/JavaScript
          console.log( "protocol:", protocol );  // protocol: https
          console.log( "fullhost:", fullhost );  // fullhost: developer.mozilla.org
          console.log( "fullpath:", fullpath );  // fullpath: es/Web/JavaScript
        </code>  
      </pre>

      <hr>

      <h2>Desestructuración de objetos</h2>

      <pre>
        <code class="language-javascript">
          const user = {
            id: 42,
            is_verified: true
          };
        
          const {id, is_verified} = user;
          
          console.log(id); // 42
          console.log(is_verified); // true
        </code>  
      </pre>

      <h3>Valores predeterminados </h3>

      <p>A una variable se le puede asignar un valor predeterminado, en el caso de que el valor desempacado del objeto
        sea undefined.</p>

      <pre>
        <code class="language-javascript">
          const {a = 10, b = 5} = {a: 3};

          console.log(a); // 3
          console.log(b); // 5
        </code>  
      </pre>

      <hr>
  </main>

  <section class="pagination">
    <article class="pagination-item">
      <a href="/pages/js/manejo-errores.html">
        <i class="material-icons">arrow_back</i>Manejo de errores
      </a>
    </article>
    <article class="pagination-item">
      <a href="/pages/js/index.html#indice">Tabla de contenido JS
        <i class="material-icons">arrow_upward</i>
      </a>
    </article>
    <article class="pagination-item">
      <a href="/pages/js/rest-operador-spread.html">Rest y spread operator
        <i class="material-icons">arrow_forward</i>
      </a>
    </article>
  </section>
  <sergey-import src="footer" />
  <script src="/js/prism.js"></script>
</body>

</html>